{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bewld\\\\Documents\\\\nairobnb\\\\client\\\\src\\\\components\\\\auth\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { Link, Navigate } from \"react-router-dom\";\n// import signupLogo from \"../../assets/auth.jpg\"\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useForm } from \"react-hook-form\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  username: yup.string().required(),\n  password: yup.string().required()\n}).required();\nexport default function Login(_ref) {\n  _s();\n  var _errors$username, _errors$password;\n  let {\n    getUserData\n  } = _ref;\n  const [serverErrors, setserverErrors] = useState(false);\n  const [hasLoggedIn, sethasLoggedIn] = useState(false);\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const onSubmit = data => handleUserLogin(data);\n  function handleUserLogin(userData) {\n    fetch(\"http://localhost:9292/login\", {\n      method: \"POST\",\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    }).then(res => res.json()).then(data => {\n      if (data.error) {\n        sethasLoggedIn(false);\n        setserverErrors(true);\n        toast.error(`${data.error}`, {\n          position: \"top-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: false,\n          progress: undefined,\n          theme: \"colored\"\n        });\n      } else {\n        getUserData(data);\n        setserverErrors(false);\n        toast.success(`Welcome back ${data.username}`, {\n          position: \"top-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: false,\n          progress: undefined,\n          theme: \"colored\"\n        });\n        sessionStorage.setItem(\"user_id\", JSON.stringify(data.id));\n        sethasLoggedIn(true);\n      }\n    });\n  }\n  if (hasLoggedIn) {\n    /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-login\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"user\",\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"signIn\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), serverErrors ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: \"Invalid username or password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }, this) : false, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userInput\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"Label\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"username\",\n            ...register(\"username\"),\n            className: \"form-control my-2\",\n            type: \"text\",\n            placeholder: \"eg. john_doe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"passwordInput\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Input\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"Label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              ...register(\"password\"),\n              className: \"form-control my-2\",\n              type: \"password\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error-message\",\n              children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          type: \"submit\",\n          children: [\"Sign In\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"svg\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"16\",\n              height: \"16\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              \"stroke-width\": \"1.5\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\",\n                d: \"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"linkDetails\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loginContainer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recover\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-4\",\n              children: [\"Don't have a Nairobnb account? \", /*#__PURE__*/_jsxDEV(Link, {\n                className: \"create\",\n                to: \"/register\",\n                children: \" Register here!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 48\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"UdRkLzIU78n6syyvSxGD8McaE44=\", false, function () {\n  return [useForm];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","Link","Navigate","yupResolver","yup","useForm","ToastContainer","toast","schema","object","username","string","required","password","Login","getUserData","serverErrors","setserverErrors","hasLoggedIn","sethasLoggedIn","register","handleSubmit","formState","errors","resolver","onSubmit","data","handleUserLogin","userData","fetch","method","headers","body","JSON","stringify","then","res","json","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","success","sessionStorage","setItem","id","message"],"sources":["C:/Users/bewld/Documents/nairobnb/client/src/components/auth/Login.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Link, Navigate } from \"react-router-dom\";\r\n// import signupLogo from \"../../assets/auth.jpg\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\n\r\nconst schema = yup\r\n  .object({\r\n    username: yup.string().required(),\r\n    password: yup.string().required(),\r\n  })\r\n  .required();\r\n\r\nexport default function Login({getUserData}) {\r\n  const [serverErrors, setserverErrors] = useState(false);\r\n  const [hasLoggedIn, sethasLoggedIn] = useState(false);\r\n  \r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const onSubmit = (data) => handleUserLogin(data);\r\n\r\n  function handleUserLogin(userData){     \r\n    fetch(\"http://localhost:9292/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData)\r\n    })\r\n    .then(res => res.json())\r\n    .then(data => {\r\n        if (data.error) {\r\n          sethasLoggedIn(false)\r\n          setserverErrors(true)\r\n          toast.error(`${data.error}`, {\r\n              position: \"top-center\",\r\n              autoClose: 5000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: false,\r\n              progress: undefined,\r\n              theme: \"colored\",\r\n          });\r\n        }\r\n        else{\r\n          getUserData(data)\r\n            setserverErrors(false)\r\n            toast.success(`Welcome back ${data.username}`, {\r\n                position: \"top-center\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: false,\r\n                progress: undefined,\r\n                theme: \"colored\",\r\n            });\r\n            sessionStorage.setItem(\"user_id\", JSON.stringify(data.id))\r\n            sethasLoggedIn(true)\r\n            \r\n        }\r\n      })    \r\n    }\r\n  if (hasLoggedIn) {\r\n    <Navigate to=\"/\" />\r\n  }  \r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n        <ToastContainer />\r\n        <div className=\"main-login\">\r\n          <form className=\"user\" onSubmit={handleSubmit(onSubmit)}>\r\n            <h1 className=\"signIn\">Sign In</h1>\r\n            {serverErrors ? <p className='error-message'>Invalid username or password</p> : false}\r\n            <div className=\"userInput\">\r\n              <label className=\"Label\">Username</label>\r\n              <input\r\n                id=\"username\"\r\n                {...register(\"username\")}\r\n                className=\"form-control my-2\"\r\n                type=\"text\"\r\n                placeholder=\"eg. john_doe\"\r\n              />\r\n              <p className=\"error-message\">\r\n                {errors.username?.message}\r\n              </p>\r\n            </div>\r\n            <div className=\"passwordInput\">\r\n              <div className=\"Input\">\r\n                <label className=\"Label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  {...register(\"password\")}\r\n                  className=\"form-control my-2\"\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                />\r\n                <p className=\"error-message\">\r\n                  {errors.password?.message}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <button className=\"btn\" type=\"submit\">\r\n              Sign In{\" \"}\r\n              <span className=\"svg\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    d=\"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75\"\r\n                  />\r\n                </svg>\r\n              </span>\r\n            </button>\r\n            <div className=\"linkDetails\">\r\n              <div className=\"loginContainer\">\r\n              </div>\r\n              <div className=\"recover\">\r\n                <p className=\"mt-4\">\r\n                Don't have a Nairobnb account? <Link className=\"create\" to=\"/register\"> Register here!</Link>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    </div>\r\n\r\n \r\n  );\r\n}"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,IAAI,EAAEC,QAAQ,QAAQ,kBAAkB;AACjD;AACA,SAASC,WAAW,QAAQ,yBAAyB;AACrD,OAAO,KAAKC,GAAG,MAAM,KAAK;AAC1B,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,cAAc,EAAEC,KAAK,QAAQ,gBAAgB;AAAC;AAGvD,MAAMC,MAAM,GAAGJ,GAAG,CACfK,MAAM,CAAC;EACNC,QAAQ,EAAEN,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,EAAE;EACjCC,QAAQ,EAAET,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ;AACjC,CAAC,CAAC,CACDA,QAAQ,EAAE;AAEb,eAAe,SAASE,KAAK,OAAgB;EAAA;EAAA;EAAA,IAAf;IAACC;EAAW,CAAC;EACzC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACkB,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAM;IACJoB,QAAQ;IACRC,YAAY;IACZC,SAAS,EAAE;MAAEC;IAAO;EACtB,CAAC,GAAGlB,OAAO,CAAC;IACVmB,QAAQ,EAAErB,WAAW,CAACK,MAAM;EAC9B,CAAC,CAAC;EACF,MAAMiB,QAAQ,GAAIC,IAAI,IAAKC,eAAe,CAACD,IAAI,CAAC;EAEhD,SAASC,eAAe,CAACC,QAAQ,EAAC;IAChCC,KAAK,CAAC,6BAA6B,EAAE;MACjCC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ;IACjC,CAAC,CAAC,CACDO,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,EAAE,CAAC,CACvBF,IAAI,CAACT,IAAI,IAAI;MACV,IAAIA,IAAI,CAACY,KAAK,EAAE;QACdnB,cAAc,CAAC,KAAK,CAAC;QACrBF,eAAe,CAAC,IAAI,CAAC;QACrBV,KAAK,CAAC+B,KAAK,CAAE,GAAEZ,IAAI,CAACY,KAAM,EAAC,EAAE;UACzBC,QAAQ,EAAE,YAAY;UACtBC,SAAS,EAAE,IAAI;UACfC,eAAe,EAAE,KAAK;UACtBC,YAAY,EAAE,IAAI;UAClBC,YAAY,EAAE,IAAI;UAClBC,SAAS,EAAE,KAAK;UAChBC,QAAQ,EAAEC,SAAS;UACnBC,KAAK,EAAE;QACX,CAAC,CAAC;MACJ,CAAC,MACG;QACFhC,WAAW,CAACW,IAAI,CAAC;QACfT,eAAe,CAAC,KAAK,CAAC;QACtBV,KAAK,CAACyC,OAAO,CAAE,gBAAetB,IAAI,CAAChB,QAAS,EAAC,EAAE;UAC3C6B,QAAQ,EAAE,YAAY;UACtBC,SAAS,EAAE,IAAI;UACfC,eAAe,EAAE,KAAK;UACtBC,YAAY,EAAE,IAAI;UAClBC,YAAY,EAAE,IAAI;UAClBC,SAAS,EAAE,KAAK;UAChBC,QAAQ,EAAEC,SAAS;UACnBC,KAAK,EAAE;QACX,CAAC,CAAC;QACFE,cAAc,CAACC,OAAO,CAAC,SAAS,EAAEjB,IAAI,CAACC,SAAS,CAACR,IAAI,CAACyB,EAAE,CAAC,CAAC;QAC1DhC,cAAc,CAAC,IAAI,CAAC;MAExB;IACF,CAAC,CAAC;EACJ;EACF,IAAID,WAAW,EAAE;IACf,qBAAC,QAAQ;MAAC,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA,QAAG;EACrB;EAEA,oBACE;IAAK,SAAS,EAAC,gBAAgB;IAAA,wBAC3B,QAAC,cAAc;MAAA;MAAA;MAAA;IAAA,QAAG,eAClB;MAAK,SAAS,EAAC,YAAY;MAAA,uBACzB;QAAM,SAAS,EAAC,MAAM;QAAC,QAAQ,EAAEG,YAAY,CAACI,QAAQ,CAAE;QAAA,wBACtD;UAAI,SAAS,EAAC,QAAQ;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAa,EAClCT,YAAY,gBAAG;UAAG,SAAS,EAAC,eAAe;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAiC,GAAG,KAAK,eACrF;UAAK,SAAS,EAAC,WAAW;UAAA,wBACxB;YAAO,SAAS,EAAC,OAAO;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAAiB,eACzC;YACE,EAAE,EAAC,UAAU;YAAA,GACTI,QAAQ,CAAC,UAAU,CAAC;YACxB,SAAS,EAAC,mBAAmB;YAC7B,IAAI,EAAC,MAAM;YACX,WAAW,EAAC;UAAc;YAAA;YAAA;YAAA;UAAA,QAC1B,eACF;YAAG,SAAS,EAAC,eAAe;YAAA,8BACzBG,MAAM,CAACb,QAAQ,qDAAf,iBAAiB0C;UAAO;YAAA;YAAA;YAAA;UAAA,QACvB;QAAA;UAAA;UAAA;UAAA;QAAA,QACA,eACN;UAAK,SAAS,EAAC,eAAe;UAAA,uBAC5B;YAAK,SAAS,EAAC,OAAO;YAAA,wBACpB;cAAO,SAAS,EAAC,OAAO;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QAAiB,eACzC;cACE,EAAE,EAAC,UAAU;cAAA,GACThC,QAAQ,CAAC,UAAU,CAAC;cACxB,SAAS,EAAC,mBAAmB;cAC7B,IAAI,EAAC,UAAU;cACf,WAAW,EAAC;YAAU;cAAA;cAAA;cAAA;YAAA,QACtB,eACF;cAAG,SAAS,EAAC,eAAe;cAAA,8BACzBG,MAAM,CAACV,QAAQ,qDAAf,iBAAiBuC;YAAO;cAAA;cAAA;cAAA;YAAA,QACvB;UAAA;YAAA;YAAA;YAAA;UAAA;QACA;UAAA;UAAA;UAAA;QAAA,QACF,eACN;UAAQ,SAAS,EAAC,KAAK;UAAC,IAAI,EAAC,QAAQ;UAAA,sBAC3B,GAAG,eACX;YAAM,SAAS,EAAC,KAAK;YAAA,uBACnB;cACE,KAAK,EAAC,IAAI;cACV,MAAM,EAAC,IAAI;cACX,KAAK,EAAC,4BAA4B;cAClC,IAAI,EAAC,MAAM;cACX,OAAO,EAAC,WAAW;cACnB,gBAAa,KAAK;cAClB,MAAM,EAAC,cAAc;cAAA,uBAErB;gBACE,kBAAe,OAAO;gBACtB,mBAAgB,OAAO;gBACvB,CAAC,EAAC;cAA8C;gBAAA;gBAAA;gBAAA;cAAA;YAChD;cAAA;cAAA;cAAA;YAAA;UACE;YAAA;YAAA;YAAA;UAAA,QACD;QAAA;UAAA;UAAA;UAAA;QAAA,QACA,eACT;UAAK,SAAS,EAAC,aAAa;UAAA,wBAC1B;YAAK,SAAS,EAAC;UAAgB;YAAA;YAAA;YAAA;UAAA,QACzB,eACN;YAAK,SAAS,EAAC,SAAS;YAAA,uBACtB;cAAG,SAAS,EAAC,MAAM;cAAA,2DACY,QAAC,IAAI;gBAAC,SAAS,EAAC,QAAQ;gBAAC,EAAE,EAAC,WAAW;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAAuB;YAAA;cAAA;cAAA;cAAA;YAAA;UACzF;YAAA;YAAA;YAAA;UAAA,QACA;QAAA;UAAA;UAAA;UAAA;QAAA,QACF;MAAA;QAAA;QAAA;QAAA;MAAA;IACD;MAAA;MAAA;MAAA;IAAA,QACH;EAAA;IAAA;IAAA;IAAA;EAAA,QACJ;AAIV;AAAC,GAlIuBtC,KAAK;EAAA,QAQvBT,OAAO;AAAA;AAAA,KARWS,KAAK;AAAA;AAAA"},"metadata":{},"sourceType":"module"}