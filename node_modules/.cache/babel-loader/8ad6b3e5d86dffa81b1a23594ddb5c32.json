{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bewld\\\\Documents\\\\nairobnb\\\\client\\\\src\\\\components\\\\auth\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport signupLogo from \"../../assets/auth.jpg\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useForm } from \"react-hook-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  username: yup.string().required(),\n  password: yup.string().required()\n}).required();\nexport default function Login(_ref) {\n  _s();\n  var _errors$username, _errors$password;\n  let {\n    handleLogIn\n  } = _ref;\n  const [serverErrors, setserverErrors] = useState({});\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const onSubmit = data => handleUserLogin(data);\n  function handleUserLogin(userData) {\n    fetch(\"https://localhost:9292/login\", {\n      method: \"POST\",\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(userData)\n    }).then(res => {\n      if (res.status !== 200) {\n        res.json().then(data => {\n          setserverErrors(data);\n        });\n      } else {\n        res.json().then(data => {\n          console.log(res.headers.get(\"x-auth-token\"));\n          sessionStorage.setItem(\"token\", JSON.stringify(res.headers.get(\"x-auth-token\")));\n          setserverErrors({});\n          handleLogIn();\n        });\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-login\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"user\",\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"signIn\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), serverErrors ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger\",\n          children: serverErrors.error_message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 28\n        }, this) : false, /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userInput\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"Label\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"username\",\n            ...register(\"username\"),\n            className: \"form-control my-2\",\n            type: \"text\",\n            placeholder: \"eg. john_doe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"passwordInput\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Input\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"Label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              ...register(\"password\"),\n              className: \"form-control my-2\",\n              type: \"password\",\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error-message\",\n              children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          type: \"submit\",\n          children: [\"Sign In\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"svg\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"16\",\n              height: \"16\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              \"stroke-width\": \"1.5\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                \"stroke-linecap\": \"round\",\n                \"stroke-linejoin\": \"round\",\n                d: \"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"linkDetails\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loginContainer\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"or\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n                className: \"create\",\n                to: \"/register\",\n                children: \"Create an Account\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recover\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Forgot your Password?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"create\",\n                href: \"#create\",\n                children: \"Recover it\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"zSS9cxUOQGmvXkWjnYb4//bZrq0=\", false, function () {\n  return [useForm];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","Link","signupLogo","yupResolver","yup","useForm","schema","object","username","string","required","password","Login","handleLogIn","serverErrors","setserverErrors","register","handleSubmit","formState","errors","resolver","onSubmit","data","handleUserLogin","userData","fetch","method","headers","body","JSON","stringify","then","res","status","json","console","log","get","sessionStorage","setItem","error_message","message"],"sources":["C:/Users/bewld/Documents/nairobnb/client/src/components/auth/Login.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport signupLogo from \"../../assets/auth.jpg\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nconst schema = yup\r\n  .object({\r\n    username: yup.string().required(),\r\n    password: yup.string().required(),\r\n  })\r\n  .required();\r\n\r\nexport default function Login({ handleLogIn }) {\r\n  const [serverErrors, setserverErrors] = useState({});\r\n  \r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const onSubmit = (data) => handleUserLogin(data);\r\n\r\n  function handleUserLogin(userData){       \r\n    fetch(\"https://localhost:9292/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData)\r\n    })\r\n    .then(res => {\r\n        if (res.status !== 200) {\r\n            res.json().then(data => {\r\n                setserverErrors(data)\r\n            })\r\n        }\r\n        else{\r\n            res.json().then(data => {\r\n              console.log(res.headers.get(\"x-auth-token\"));\r\n              sessionStorage.setItem(\"token\", JSON.stringify(res.headers.get(\"x-auth-token\")));\r\n              setserverErrors({})\r\n              handleLogIn();\r\n            })\r\n        }\r\n    })\r\n    \r\n}\r\n  return (\r\n    <div className=\"login-container\">\r\n        <div className=\"main-login\">\r\n          <form className=\"user\" onSubmit={handleSubmit(onSubmit)}>\r\n            <h1 className=\"signIn\">Sign In</h1>\r\n            {serverErrors? <p className='text-danger'>{serverErrors.error_message}</p> : false}\r\n            <div className=\"userInput\">\r\n              <label className=\"Label\">Username</label>\r\n              <input\r\n                id=\"username\"\r\n                {...register(\"username\")}\r\n                className=\"form-control my-2\"\r\n                type=\"text\"\r\n                placeholder=\"eg. john_doe\"\r\n              />\r\n              <p className=\"error-message\">\r\n                {errors.username?.message}\r\n              </p>\r\n            </div>\r\n            <div className=\"passwordInput\">\r\n              <div className=\"Input\">\r\n                <label className=\"Label\">Password</label>\r\n                <input\r\n                  id=\"password\"\r\n                  {...register(\"password\")}\r\n                  className=\"form-control my-2\"\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                />\r\n                <p className=\"error-message\">\r\n                  {errors.password?.message}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <button className=\"btn\" type=\"submit\">\r\n              Sign In{\" \"}\r\n              <span className=\"svg\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    d=\"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75\"\r\n                  />\r\n                </svg>\r\n              </span>\r\n            </button>\r\n            <div className=\"linkDetails\">\r\n              <div className=\"loginContainer\">\r\n                <p>\r\n                  or{\" \"}\r\n                  <Link className=\"create\" to=\"/register\">\r\n                    Create an Account\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n              <div className=\"recover\">\r\n                <p>\r\n                  Forgot your Password?{\" \"}\r\n                  <a className=\"create\" href=\"#create\">\r\n                    Recover it\r\n                  </a>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    </div>\r\n\r\n \r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}